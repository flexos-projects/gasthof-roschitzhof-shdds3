---
id: bookings-collection-spec
title: Bookings Data Collection Specification
description: Defines the structure, fields, and relationships for the 'bookings' data collection, crucial for managing reservations.
type: spec
subtype: collection
status: draft
sequence: 40
tags:
  - database
  - data-model
  - bookings
  - firebase
relatesTo:
  - integrated-booking-enquiry
  - user-account-settings
createdAt: 2023-10-27T10:00:00Z
updatedAt: 2023-10-27T10:00:00Z
---
# Bookings Data Collection Specification

This document outlines the `bookings` data collection, which is central to managing both table reservations and overnight stays at Gasthof Roschitzhof. This collection will store all necessary information related to a guest's reservation, enabling efficient management by staff and providing historical data for users.

## Collection Name: `bookings`

## Purpose:

To store and manage all reservation details, including type (table/room), guest information, dates, times, and status, facilitating the booking process and providing a single source of truth for all reservations.

## Fields:

*   **`id`** (string, required):
    *   Unique identifier for each booking. Generated by the database (e.g., Firebase Firestore document ID).
*   **`user_id`** (string, optional):
    *   References the `id` of the user in the `users` collection if the booking was made by a registered user. Null for guest bookings.
*   **`type`** (enum, required):
    *   Type of reservation. Allowed values: `'table'`, `'room'`.
*   **`status`** (enum, required):
    *   Current state of the booking. Allowed values: `'pending'`, `'confirmed'`, `'cancelled'`, `'completed'`.
*   **`start_time`** (date, required):
    *   Timestamp representing the start date and time of the reservation (e.g., table booking time, room check-in).
*   **`end_time`** (date, optional):
    *   Timestamp representing the end date and time of the reservation (e.g., room check-out). Required for `'room'` bookings.
*   **`guests`** (number, required):
    *   The number of people included in the reservation (e.g., number of diners, number of occupants for a room).
*   **`notes`** (string, optional):
    *   Any special requests or comments provided by the user during booking (e.g., dietary restrictions, preferred table location).
*   **`contact_name`** (string, required):
    *   Full name of the person making the booking.
*   **`contact_email`** (email, required):
    *   Email address for sending confirmation and communication regarding the booking.
*   **`contact_phone`** (string, optional):
    *   Phone number for direct contact regarding the booking.
*   **`created_at`** (date, required):
    *   Timestamp indicating when the booking record was created.

## Relationships:

*   **`user_id`** references the `id` field in the `users` collection. This allows for linking bookings to specific user accounts, enabling features like viewing past bookings in the user profile.

## Data Integrity and Validation:

*   All required fields must be present and conform to their specified data types.
*   `type` and `status` fields must adhere to their defined enum values.
*   `start_time` and `end_time` (where applicable) should be valid date/time formats and logically consistent (e.g., `end_time` after `start_time`).
*   Server-side validation will ensure that `user_id` (if provided) corresponds to an existing user.